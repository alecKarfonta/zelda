Type: architecture_question
Quality Score: 8.5
Validation Notes: 
--------------------------------------------------
Instruction: Explain how to safely add a new actor spawn to Kokiri Forest (Scene 0x55) without corrupting the scene's actor list or breaking object dependencies.",
    
    "input": null,
    
    "output": "To add a new actor spawn to Kokiri Forest safely:

1. First locate the room header in scene 0x55's setup data:
```c
// Room 0 header offset: 0x02004800
RoomHeader kokiriForeestRoom0 = {
    .actorList = 0x02004840,
    .numActors = 0x0C  // Currently 12 actors
};
```

2. The actor list needs to be expanded. Verify there's space after the current list or relocate it:
```c
// New actor entry format
ActorSpawn newActor = {
    .actorNumber = 0x0010,  // EN_ITEM00 (collectible)
    .posX = 482.0f,
    .posY = 122.0f, 
    .posZ = -892.0f,
    .rotY = 0x4000,
    .params = 0x0002  // Blue Rupee
};
```

3. Check object dependencies - EN_ITEM00 requires object_gi_bottle in the object list:
```c
// Add to scene object list if not present
u16 objectList[] = {
    OBJECT_LINK,
    OBJECT_GI_BOTTLE,  // Required for EN_ITEM00
    0x00              // Terminator
};
```

4. Update the room header's numActors field and add the new spawn data

5. Update DMA tables if you relocated any data blocks",

    "technical_notes": "- Actor spawn data must be 16-byte aligned
- Scene setup modifications require updating the scene_table.h offsets
- Object list has an 8-entry maximum per scene
- Room headers use virtual addresses in 0x02XXXXXX format
Output:
To add a new actor spawn to Kokiri Forest safely:

1. First locate the room header in scene 0x55's setup data:
```c
// Room 0 header offset: 0x02004800
RoomHeader kokiriForeestRoom0 = {
    .actorList = 0x02004840,
    .numActors = 0x0C  // Currently 12 actors
};
```

2. The actor list needs to be expanded. Verify there's space after the current list or relocate it:
```c
// New actor entry format
ActorSpawn newActor = {
    .actorNumber = 0x0010,  // EN_ITEM00 (collectible)
    .posX = 482.0f,
    .posY = 122.0f, 
    .posZ = -892.0f,
    .rotY = 0x4000,
    .params = 0x0002  // Blue Rupee
};
```

3. Check object dependencies - EN_ITEM00 requires object_gi_bottle in the object list:
```c
// Add to scene object list if not present
u16 objectList[] = {
    OBJECT_LINK,
    OBJECT_GI_BOTTLE,  // Required for EN_ITEM00
    0x00              // Terminator
};
```

4. Update the room header's numActors field and add the new spawn data

5. Update DMA tables if you relocated any data blocks",

    "technical_notes": "- Actor spawn data must be 16-byte aligned
- Scene setup modifications require updating the scene_table.h offsets
- Object list has an 8-entry maximum per scene
- Room headers use virtual addresses in 0x02XXXXXX format
